# Hacker系统之防抄袭

背景：我司是做互动式广告效果的，类似大转盘、刮刮卡这类，期间产出了大量不错的互动工具。这些工具页面美观、动效新奇、效果很棒，但是不出几天，我们的竞品也会出现“克隆”产品，着实让人头疼，甚至图片素材和动效一模一样～

## 禁止PC访问

通过禁止PC访问，增加“克隆”成本

### 第一道关卡：userAgent

通过userAgent分析，用户当前所在的环境，如果是PC则禁止

### 第二道关卡：platform

通过platform分析，当前用户所在的操作环境，如果是PC则禁止

### 内部人员访问

通过环境等分析，如果当前用户在内网访问，则放行

### 如果外部人员想在PC访问怎么办

我们提供了密匙访问，携带密匙访问的用户，一律放行。（当前密匙有效期为10分钟）

## 图片防盗链

防盗链的策略：后台判断请求的Referrer属性是不是来自于白名单的网站，如果不是就返回403。我司是用阿里云oss，这里就阿里云oss防盗链简要说明一下。

### oss提供的防盗链方法

1.设置Referer   
2.签名URL，适合习惯开发的用户

### referer设置

1.Referer字段白名单   
2.是否允许空Referer访问

### 签名URL

1.将Bucket的权限设置为私有读   
2.根据期望的超时时间（签名URL失效的时间）生成签名

### 特别说明

签名URL可以和Referer白名单功能一起使用。

如果签名URL失效的时间限制在分钟内，盗链用户即使伪造了Referer也必须拿到签名的URL，且必须在有效的时间内才能盗链成功。相比只使用Referer来说，增加了盗链的难度。也就是说签名URL配合Referer白名单功能，可以增加防盗链的效果。

目前公司域名较多，且白名单机制不完全，暂未能推进。

## 代码下毒

验证方案不可行